# Auto decrypt root with TPM

## Use systemd boot
1. Add systemd after base and before autodetect instead of udev in /etc/mkinitcpio.conf
2. Ensure sd-encrypt after block and before filesystems instead of encrypt in /etc/mkinitcpio.conf
E.g: HOOKS=(base systemd autodetect keyboard keymap modconf block sd-encrypt filesystems fsck edid)
3. mkinitcpio -p linux-lts

## Add password to TPM
1. systemd-cryptenroll /dev/mapper/root --recovery-key
2. systemd-cryptenroll --tpm2-device=auto --tpm2-pcrs=0+7 /dev/mapper/root
